<h3 class="with-line">{{username}} 特休補休兌換</h3>

<div class="row" >
    <table class="table table-bordered table-hover table-condensed"
           ng-if="workOffFormCtrlVm.loginUserHolidayForm">
        <thead>
        <tr style="white-space:nowrap">
            <td style="vertical-align: inherit; text-align: center" width="80px"></td>
            <td style="vertical-align: inherit; text-align: center" width="170px">兌換日期</td>
            <td style="vertical-align: inherit; text-align: center">星期</td>
            <td style="vertical-align: inherit; text-align: center">假別</td>

            <td style="vertical-align: inherit; text-align: center" width="80px">時數</td>
            <td style="vertical-align: inherit; text-align: center">狀態</td>
            <td style="vertical-align: inherit; text-align: center">經理確認</td>
            <td style="vertical-align: inherit; text-align: center">行政確認</td>
            <td style="vertical-align: inherit; text-align: center">兌換扣款</td>
        </tr>
        </thead>
        <tbody ng-repeat="table in specificUserExchangeTablesItems">
        <tr style="vertical-align: inherit; text-align: center">
            <!--序號-->
            <td style="vertical-align: inherit; text-align: center">
                <span id="prjCode">{{$index + 1}}</span>
                <!--<span >{{table.tableID}}</span>-->
                <button class="btn btn-danger editable-table-button btn-xs"
                        ng-show="!rowform1.$waiting && !table.isSendReview"
                        ng-click="removeExchangeItem($index);">移除
                </button>
            </td>
            <!--日期-->
            <td class="form-group" style="vertical-align: inherit; text-align: center">
                <div ng-show="!rowform1.$waiting && !table.isSendReview">
                    待提交審查後壓印
                </div>
                <my ng-show="rowform1.$waiting ||table.isSendReview">
                    {{showDate(table)}}
                </my>
                <!--{{table.month}} / {{table.day}}-->
            </td>
            <!--星期-->
            <td style="vertical-align: inherit; text-align: center">
                {{showDay(table.day)}}
            </td>
            <!--假別-->
            <td class="form-group" style="vertical-align: inherit; text-align: center">
                <my ng-show="!rowform1.$waiting && !table.isSendReview">
                    <my-selector type="{{table.workOffType}}"
                                 showtype="1"
                                 form="{{workOffFormCtrlVm.loginUserHolidayForm}}"></my-selector>
                </my>
                <my ng-show="rowform1.$waiting ||table.isSendReview">
                    {{showWorkOffTypeString(table.workOffType)}}
                </my>
            </td>
            <!--時數/天數-->
            <td class="form-group has-success" style="vertical-align: inherit;">
                <input type="text"
                       class="form-control input-sm"
                       ng-model="table.value"/>
            </td>
            <!--狀態-->
            <td style="vertical-align: inherit;" rowspan="2">
                <form editable-form name="rowform1" ng-show="rowform1.$visible"
                      class="form-buttons form-inline">
                </form>
                <!--審查中-->
                <div ng-show="rowform1.$waiting || (table.isSendReview && (!table.isBossCheck || !table.isExecutiveCheck))">
                    <button class="btn btn-warning editable-table-button btn-xs">
                        審查中
                    </button>
                </div>
                <!--審查完成-->
                <div ng-show="(table.isBossCheck && table.isExecutiveCheck)">
                    <button class="btn btn-success editable-table-button btn-xs">
                        審查完成
                    </button>
                </div>
                <!--提交-->
                <div ng-show="!rowform1.$waiting && !table.isSendReview">
                    <div class="buttons" ng-show="!rowform1.$visible">
                        <button class="btn btn-danger editable-table-button btn-xs"
                                ng-click="reviewWorkOffExchangeTable(table, this, $index) ">提交審查
                        </button>
                    </div>
                </div>
            </td>
            <!--主管確認-->
            <td rowspan="2" style="vertical-align: inherit;">
                <div ng-show="rowform1.$waiting || (table.isSendReview && !table.isBossCheck)">
                    <button class="btn btn-warning editable-table-button btn-xs"
                            style="color: black">
                        {{ showBoss(bossID)}}
                        <br>
                        確認作業中
                    </button>
                </div>
                <div ng-show="table.isBossCheck">
                    <button class="btn btn-info editable-table-button btn-xs"
                            style="color: black">
                        {{ showBoss(bossID)}}
                        <br>
                        確認完成
                    </button>
                </div>
                <div ng-show="!table.isSendReview && table.isBossReject">
                    <button class="btn btn-warning editable-table-button btn-xs"
                            style="color: black">
                        {{ showBoss(bossID)}}
                        <br>
                        退回
                    </button>
                </div>
                <my ng-show="!table.isSendReview && table.isBossReject"
                    ng-class="{workAdd: hover}"
                    class="mytooltip"
                    ng-mouseover="hover = true"
                    ng-mouseleave="hover = false">
                    原因：<i class="ion-clipboard"></i>
                    <span class="tooltiptext">{{table.bossReject_memo}}</span>
                </my>
            </td>
            <!--行政確認-->
            <td rowspan="2" style="vertical-align: inherit;">
                <div ng-show="rowform1.$waiting || table.isSendReview && !table.isExecutiveCheck">
                    <button class="btn btn-warning editable-table-button btn-xs"
                            style="color: black">
                        行政
                        <br>
                        確認作業中
                    </button>
                </div>
                <div ng-show="table.isExecutiveCheck">
                    <button class="btn btn-info editable-table-button btn-xs"
                            style="color: black">
                        行政
                        <br>
                        確認完成
                    </button>
                </div>
                <div ng-show="!table.isSendReview && table.isExecutiveReject">
                    <button class="btn btn-warning editable-table-button btn-xs"
                            style="color: black">
                        行政
                        <br>
                        退回
                    </button>
                </div>
                <my ng-show="!table.isSendReview && table.isExecutiveReject"
                    ng-class="{workAdd: hover}"
                    class="mytooltip"
                    ng-mouseover="hover = true"
                    ng-mouseleave="hover = false">
                    原因：<i class="ion-clipboard"></i>
                    <span class="tooltiptext">{{table.executiveReject_memo}}</span>
                </my>
            </td>
            <!-- 兌換款 -->
            <td style="vertical-align: inherit;">
                <!--審查完成-->
                <div ng-show="(table.isBossCheck && table.isExecutiveCheck &&
                        (table.workOffType === 2 || table.workOffType === 3))">
                    <!--只有補休特休能請款 20190515-->
                    <span>
                                <!-- -{{(table.userHourSalary) * table.myHourDiff}}-->
                                -{{formatFloat((table.userMonthSalary/240) * table.myHourDiff, 2)}}
                            </span>
                </div>
            </td>

        </tr>
        </tbody>
    </table>
</div>
<div class="row">
    <button type="button"
            ng-click="addExchangeItem()"
            class="btn btn-info btn-icon">
        <i class="ion-plus-round"/>
    </button>
</div>
